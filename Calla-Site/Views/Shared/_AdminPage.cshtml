@{
    Layout = "_Page";
}

@section HeadScripts
{
    <script>
        function req(method, obj) {
            return fetch(document.location.href, {
                method,
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(obj)
            });
        }
        async function updateItem(obj) {
            const request = req("POST", obj);
            const response = await request;
            if (!response.ok) {
                alert("Error! " + response.status + " " + response.statusText);
            }
        }

        async function deleteItem(id) {
            const tableRow = document.getElementById("row-" + id);
            tableRow.style.color = "red";

            const tableBody = tableRow.parentElement;
            const request = req("DELETE", id);
            const response = await request;
            if (response.ok) {
                tableBody.removeChild(tableRow);

                if (tableBody.children.length === 0) {
                    const table = tableBody.parentElement;
                    const tableParent = table.parentElement;
                    const p = document.createElement("p");
                    p.appendChild(document.createTextNode("No Content"));
                    tableParent.removeChild(table);
                    tableParent.appendChild(p);
                }
            }
            else {
                alert(response.statusText);
            }
        }
    </script>
    <style type="text/css">
        #output {
            width: 100%;
        }

            #output > thead > tr {
                text-align: left;
                background-color: #6684F1;
                color: white;
            }

                #output > thead > tr > th {
                    padding: 0.5em;
                }

            #output > tbody > tr:nth-child(even) {
                background-color: #eee;
            }

            #output > tbody > tr > td {
                padding: 0.5em;
            }
    </style>
}


<a asp-area="" asp-controller="Admin" asp-action="Index">Admin</a>
<ul style="list-style:none">
    <li><a asp-area="" asp-controller="Admin" asp-action="Contacts">Contacts</a></li>
    <li><a asp-area="" asp-controller="Admin" asp-action="Domains">Domains</a></li>
    <li><a asp-area="" asp-controller="Admin" asp-action="PageViews">Page Views</a></li>
    <li><a asp-area="" asp-controller="Admin" asp-action="Referrers">Referrers</a></li>
    <li><a asp-area="" asp-controller="Admin" asp-action="Rooms">Rooms</a></li>
    <li><a asp-area="" asp-controller="Admin" asp-action="UserAgents">User Agents</a></li>
</ul>

@RenderBody()